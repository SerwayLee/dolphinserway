<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>simpleMap</title>
		<script	src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
		<script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=l7xxe8a7a37a25674589aab900d3d2106d2f"></script>
		<script type="text/javascript">
			var map;
			var markerInfo;
			//출발지,도착지 마커
			var marker_s, marker_e, marker_p;
			//경로그림정보
			var drawInfoArr = [];
			var drawInfoArr2 = [];
		
			var chktraffic = [];
			var resultdrawArr = [];
			var resultMarkerArr = [];
		
			function initTmap() {
				// 1. 지도 띄우기
				map = new Tmapv2.Map("map_div", {
					center : new Tmapv2.LatLng(37.49241689559544, 127.03171389453507),
					width : "100%",
					height : "400px",
					zoom : 11,
					zoomControl : true,
					scrollwheel : true
				});
		
				<div id = "menu1" style="text-decoration:none;">

        <br/>

        <div>&nbsp;<a style="text-decoration:none;" href="javascript:selectMenu('0')"><font color="black">&nbsp;>>현재 위치를 출발 위치로 지정</font></a></div>

        <div>&nbsp;<a style="text-decoration:none;" href="javascript:selectMenu('1')"><font color="black">&nbsp;>>현재 위치를 도착 위치로 지정</font></a></div>

        <input type="hidden" id="pixelX"/>

        <input type="hidden" id="pixelY"/>

        <br/>

functionsetLayers(){

                   //레이어 등록

                   if(!map){

                                varmsg = "map객체가 초기화되기 전에 레이어가 등록되었습니다."

                                        alert(msg);

                             return;                                 

                   } 

                   var context = {

        getColor: function(feature){

        var color = '#aaaaaa';

                             if (feature.attributes.clazz&&feature.attributes.clazz === 4) {

                                        color = '#ee0000';

                             } else if(feature.cluster) {

                   varonlyFour = true;

                   for (vari = 0; i<feature.cluster.length; i++) {

                             if (onlyFour&&feature.cluster[i].attributes.clazz !== 4) {

                                        onlyFour = false;

                             }

                   }

                   if (onlyFour === true) {

                             color = '#ee0000';

                   }

        }

        return color;

        }

};                                                                       

        var style = new Tmap.Style({

        pointRadius: 5,

           fillColor: "${getColor}",

        fillOpacity: 1,

        strokeColor: "#FF0000",

        strokeWidth: 2,

        strokeOpacity: 1,

                   graphicZIndex: 1

        }, {

context: context

        });                  

        varv_option = {renderers: ['Canvas', 'SVG', 'VML'], styleMap:style};                                       

        kmlLayer = new Tmap.Layer.Vector("kml", v_option);

        markers = new Tmap.Layer.Markers( "MarkerLayer" );                                       

        map.addLayer(kmlLayer);

        map.addLayer(markers);

} 
				  functionshowMenu(evt) {

                             var menu1 = document.getElementById("menu1")

                             menu1.style.left=evt.clientX+"px";

                             menu1.style.top=evt.clientY+"px";

                             menu1.style.display='block';

                            

                             pixelX = evt.clientX;

                             pixelY = evt.clientY;

                            

                   }

                            

                   functioncloseMenu(evt) {

                             var menu1 = document.getElementById("menu1")

                             menu1.style.display='none';

                   } 

                   functionselectMenu(selectVal){

                             jQuery('#menu1').css('display', 'none');

                             if(selectVal == '0'){

                                        if(marker1 != null){

                                                  marker1.destroy();

                                        }                                       

                                        if(kmlLayer != null){

                                                  kmlLayer.destroyFeatures();

                                        }                                       

                                        varlonLat = map.getLonLatFromPixel(new Tmap.Pixel(pixelX,pixelY));

                                        vartrLonLat = get4326LonLat(lonLat.lon, lonLat.lat);

                                        jQuery('#startX').val(lonLat.lon);

                                        jQuery('#startY').val(lonLat.lat);     

                                        varstartX = jQuery('#startX').val();

                             varstartY = jQuery('#startY').val();                            

                             var size = new Tmap.Size(31,35);

                                        var offset = new Tmap.Pixel(-(size.w/2), -size.h);               

                                       

                                        var icon = new Tmap.IconHtml("<imgsrc=img/start.png />", size, offset);

                                        marker1 = new Tmap.Markers(lonLat, icon);            

                                        markers.addMarker(marker1);

                                                                       

                             }else if(selectVal == '1'){

                                        if(marker2 != null){

                                                  marker2.destroy();

                                        }

                                        varlonLat = map.getLonLatFromPixel(new Tmap.Pixel(pixelX,pixelY));

                                        vartrLonLat = get4326LonLat(lonLat.lon, lonLat.lat);

                                        jQuery('#endX').val(lonLat.lon);

                             jQuery('#endY').val(lonLat.lat);                                   

                             varendX = jQuery('#endX').val();

                             varendY = jQuery('#endY').val();                            

                             var size = new Tmap.Size(31,35);

                                        var offset = new Tmap.Pixel(-(size.w/2), -size.h);                

                                       

                                        var icon = new Tmap.IconHtml("<imgsrc=img/end.png />", size, offset);

                                        marker2 = new Tmap.Markers(lonLat, icon);            

                                        markers.addMarker(marker2);

                            

                                                            

                             }

                   }
  functiongetRouteData(){

                   varstartLon = jQuery('#startX').val();

                   varstartLat = jQuery('#startY').val();

                   varendLon = jQuery('#endX').val();

                   varendLat = jQuery('#endY').val();  

                  

                   if(startX == '' || startY == ''){

                             alert('출발 위치를 선택하세요.')

                   }else if(endX == '' || endY == ''){

                             alert('도착 위치를 선택하세요')

                   }else{

                             markers.clearMarkers();

                            

                             varstartLonLat = new Tmap.LonLat(startLon, startLat);

                             varendLonLat = new Tmap.LonLat(endLon, endLat);

                            

                                                  tData = new Tmap.TData();

                                        var option = {

                                                  version:"1",

                                                  format:'xml'                                                 

                                            }

                                       

                                        tData.getRoutePlan(startLonLat, endLonLat, option);

                                       

                                        tData.events.register("onComplete", tData, onLoadSuccess);

                                        tData.events.register("onProgress", tData, onProgressLoadData);

                                        tData.events.register("onError", tData, onErrorLoadData);                     

                            

                                       

                           }          

                }
                             functiononLoadSuccess(){

                                        jQuery('#loading').css('display', "block");

                             varkmlForm = new Tmap.Format.KML().read(this.responseXML);

                                        for(vari=0;i<=kmlForm.length-1;i++){

                                                  kmlLayer.addFeatures([kmlForm[i]]);

                                         }

                                       

                                        setTimeout(stop, 500)

                             }
[출처] T Map API 활용하기 – 자동차 경로 검색|작성자 로베
		</script>
	</head>
	<body onload="initTmap();">
		<div class="ft_area">
			<div class="ft_select_wrap">
				<div class="ft_select">
					<select id="selectLevel">
						<option value="0" selected="selected">교통최적+추천</option>
						<option value="1">교통최적+무료우선</option>
						<option value="2">교통최적+최소시간</option>
						<option value="3">교통최적+초보</option>
						<option value="4">교통최적+고속도로우선</option>
						<option value="10">최단거리+유/무료</option>
						<option value="12">이륜차도로우선</option>
						<option value="19">교통최적+어린이보호구역 회피</option>
					</select> <select id="year">
						<option value="N" selected="selected">교통정보 표출 옵션</option>
						<option value="Y">Y</option>
						<option value="N">N</option>
					</select>
					<button id="btn_select">적용하기</button>
				</div>
			</div>
			<div class="map_act_btn_wrap clear_box"></div>
			<div class="clear"></div>
		</div>
	
		<div id="map_wrap" class="map_wrap">
			<div id="map_div"></div>
		</div>
		<div class="map_act_btn_wrap clear_box"></div>
		<p id="result"></p>
		<br />
	</body>
</html>
